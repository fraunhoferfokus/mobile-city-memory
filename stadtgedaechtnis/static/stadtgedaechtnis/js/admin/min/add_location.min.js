function replace_locations(e){$("table#locations tr.entry").remove(),$("img#loading").css("visibility","hidden");for(var a=0;a<e.entries.length;a++){var t=e.entries[a],n=$("<tr>").appendTo("table#locations").addClass("entry");$("<td>").appendTo(n).text(t.name+" ("+t.lat+", "+t.lon+")");var i=$("<td>").appendTo(n);$("<a>").appendTo(i).attr({href:t.url,target:"_blank"}).text(t.url),i=$("<td>").appendTo(n),$("<a>").appendTo(i).attr({href:"#",onClick:'add_link("'+t.url+'")'}).text(gettext("Ausw√§hlen"));var o=new google.maps.InfoWindow({content:t.name}),l=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lon),map:map,title:t.name});google.maps.event.addListener(l,"click",function(){o.open(map,l)})}}function search_locations(){$("img#loading").css("visibility","visible"),$("div#map_canvas").css("visibility","visible");var e=$("#id_latitude").val(),a=$("#id_longitude").val(),t=new google.maps.LatLng(e,a);map.panTo(t),new google.maps.Marker({position:t,map:map,icon:"http://maps.gstatic.com/mapfiles/markers2/icon_green.png",title:gettext("Aktueller Ort")}),$.get("../../../../stadtgedaechtnis/services/get-nearby-places/"+e+"/"+a+"/").done(replace_locations)}function add_link(e){$("#id_dbpedia_link").val(e)}function initialize_map(){var e={center:new google.maps.LatLng(50.258,10.965),zoom:14};map=new google.maps.Map(document.getElementById("map_canvas"),e)}var map;$(function(){initialize_map()});