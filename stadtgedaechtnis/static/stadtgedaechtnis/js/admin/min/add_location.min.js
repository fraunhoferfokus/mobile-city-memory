function replace_locations(e){$("table#locations tr.entry").remove(),$("img#loading").css("visibility","hidden");for(var a=0;a<e.entries.length;a++){var n=e.entries[a],t=$("<tr>").appendTo("table#locations").addClass("entry");$("<td>").appendTo(t).text(n.name+" ("+n.lat+", "+n.lon+")");var i=$("<td>").appendTo(t);$("<a>").appendTo(i).attr({href:n.url,target:"_blank"}).text(n.url),i=$("<td>").appendTo(t),$("<a>").appendTo(i).attr({href:"#",onClick:'add_link("'+n.url+'")'}).text(gettext("Ausw√§hlen"));var o=new google.maps.InfoWindow({content:n.name}),l=new google.maps.Marker({position:new google.maps.LatLng(n.lat,n.lon),map:map,title:n.name});google.maps.event.addListener(l,"click",function(){o.open(map,l)})}}function search_locations(){$("img#loading").css("visibility","visible"),$("div#map_canvas").css("visibility","visible");var e=$("#id_latitude").val(),a=$("#id_longitude").val(),n=new google.maps.LatLng(e,a);map.panTo(n),new google.maps.Marker({position:n,map:map,icon:"http://maps.gstatic.com/mapfiles/markers2/icon_green.png",title:gettext("Aktueller Ort")}),$.get("/services/get-nearby-places/"+e+"/"+a+"/").done(replace_locations),getNearbyAddresses(e,a,function(e){for(var a=0;a<e.length;a++){var n=new google.maps.Marker({position:new google.maps.LatLng(e[a].latitude,e[a].longitude),map:map,title:e[a].address});google.maps.event.addListener(n,"click",function(e){return function(){$("input#id_label").val(e)}}(e[a].address))}})}function add_link(e){$("input#id_dbpedia_link").val(e)}function initialize_map(){var e={center:new google.maps.LatLng(50.258,10.965),zoom:14};map=new google.maps.Map(document.getElementById("map_canvas"),e)}var map;$(function(){initialize_map()});