function GeolocationMarker(o,t,i){var e={clickable:!1,cursor:"pointer",draggable:!1,flat:!0,icon:{url:"https://google-maps-utility-library-v3.googlecode.com/svn/trunk/geolocationmarker/images/gpsloc.png",size:new google.maps.Size(34,34),scaledSize:new google.maps.Size(17,17),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(8,8)},optimized:!1,position:new google.maps.LatLng(0,0),title:"Current location",zIndex:2};t&&(e=this.copyOptions_(e,t));var r={clickable:!1,radius:0,strokeColor:"1bb6ff",strokeOpacity:.4,fillColor:"61a0bf",fillOpacity:.4,strokeWeight:1,zIndex:1};i&&(r=this.copyOptions_(r,i)),this.marker_=new google.maps.Marker(e),this.circle_=new google.maps.Circle(r),this.accuracy=null,this.position=null,this.map=null,this.set("minimum_accuracy",null),this.set("position_options",{enableHighAccuracy:!0,maximumAge:1e3}),this.circle_.bindTo("map",this.marker_),o&&this.setMap(o)}GeolocationMarker.prototype=new google.maps.MVCObject,GeolocationMarker.prototype.set=function(o,t){if(/^(?:position|accuracy)$/i.test(o))throw"'"+o+"' is a read-only property.";/map/i.test(o)?this.setMap(t):google.maps.MVCObject.prototype.set.apply(this,arguments)},GeolocationMarker.prototype.marker_=null,GeolocationMarker.prototype.circle_=null,GeolocationMarker.prototype.getMap=function(){return this.map},GeolocationMarker.prototype.getPositionOptions=function(){return this.get("position_options")},GeolocationMarker.prototype.setPositionOptions=function(o){this.set("position_options",o)},GeolocationMarker.prototype.getPosition=function(){return this.position},GeolocationMarker.prototype.getBounds=function(){return this.position?this.circle_.getBounds():null},GeolocationMarker.prototype.getAccuracy=function(){return this.accuracy},GeolocationMarker.prototype.getMinimumAccuracy=function(){return this.get("minimum_accuracy")},GeolocationMarker.prototype.setMinimumAccuracy=function(o){this.set("minimum_accuracy",o)},GeolocationMarker.prototype.watchId_=-1,GeolocationMarker.prototype.setMap=function(o){this.map=o,this.notify("map"),o?this.watchPosition_():(this.marker_.unbind("position"),this.circle_.unbind("center"),this.circle_.unbind("radius"),this.accuracy=null,this.position=null,navigator.geolocation.clearWatch(this.watchId_),this.watchId_=-1,this.marker_.setMap(o))},GeolocationMarker.prototype.setMarkerOptions=function(o){this.marker_.setOptions(this.copyOptions_({},o))},GeolocationMarker.prototype.setCircleOptions=function(o){this.circle_.setOptions(this.copyOptions_({},o))},GeolocationMarker.prototype.updatePosition_=function(o){var t=new google.maps.LatLng(o.coords.latitude,o.coords.longitude),i=null==this.marker_.getMap();if(i){if(null!=this.getMinimumAccuracy()&&o.coords.accuracy>this.getMinimumAccuracy())return;this.marker_.setMap(this.map),this.marker_.bindTo("position",this),this.circle_.bindTo("center",this,"position"),this.circle_.bindTo("radius",this,"accuracy")}this.accuracy!=o.coords.accuracy&&google.maps.MVCObject.prototype.set.call(this,"accuracy",o.coords.accuracy),(i||null==this.position||!this.position.equals(t))&&google.maps.MVCObject.prototype.set.call(this,"position",t)},GeolocationMarker.prototype.watchPosition_=function(){var o=this;navigator.geolocation&&(this.watchId_=navigator.geolocation.watchPosition(function(t){o.updatePosition_(t)},function(t){google.maps.event.trigger(o,"geolocation_error",t)},this.getPositionOptions()))},GeolocationMarker.prototype.copyOptions_=function(o,t){for(var i in t)GeolocationMarker.DISALLOWED_OPTIONS[i]!==!0&&(o[i]=t[i]);return o},GeolocationMarker.DISALLOWED_OPTIONS={map:!0,position:!0,radius:!0};